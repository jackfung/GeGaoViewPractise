(function(c){var a=[];c.carousel=function(f,g){if(g===undefined&&this.length>0){return a[this.id]?a[this.id]:null}var e=new d(f,g);if(this.id){a[this.id]=e}return this.length===1?e:this};var d=(function(){if(!window.WebKitCSSMatrix){return}var f="m11" in new WebKitCSSMatrix()?"3d(":"(";var e="m11" in new WebKitCSSMatrix()?",0)":")";var g=function(o,m){if(typeof o==="string"||o instanceof String){this.container=document.getElementById(o)}else{this.container=o}if(!this.container){alert("Error finding container for carousel "+o);return}if(this instanceof g){for(var i in m){if(m.hasOwnProperty(i)){this[i]=m[i]}}}else{return new g(o,m)}try{var l=this;window.that=this;this.pagingDiv=this.pagingDiv?document.getElementById(this.pagingDiv):null;this.container.style.overflow="hidden";this.container.style["-webkit-box-orient"]="vertical";this.container.style["display"]="-webkit-box";this.container.style["-webkit-box-orient"]="vertical";if(this.vertical){this.horizontal=false}var h=this.container.innerHTML;this.container.innerHTML="";var k=document.createElement("div");k.innerHTML=h;if(this.horizontal){k.style.display="-webkit-box";k.style["-webkit-box-flex"]=1}else{k.style.display="block"}k.style.position="relative";k.style.left="0px";this.container.appendChild(k);this.el=k;this.refreshItems();this.mostVisited=document.getElementById("mostVisited");this.page1=document.getElementById("urlIcons");this.siteNav=document.getElementById("siteNav");k.addEventListener("touchmove",function(j){l.touchMove(j)},false);k.addEventListener("touchend",function(j){l.touchEnd(j)},false);k.addEventListener("touchstart",function(j){l.touchStart(j)},false);window.orientationChange=function(){if(orientation){l.__proto__.maxY.y2=(-(document.getElementsByClassName("mvItem").length-2.5)*(53));l.__proto__.maxY.y1=(-Math.ceil(document.getElementsByClassName("iconContainer").length/6)*(97)+document.getElementsByClassName("urlContainer")[0].clientHeight)}else{l.__proto__.maxY.y2=(-(document.getElementsByClassName("mvItem").length-6)*(parseInt(getComputedStyle(this.mostVisited).height)/6));l.__proto__.maxY.y1=(-Math.ceil(document.getElementsByClassName("iconContainer").length/4)*(97)+document.getElementsByClassName("urlContainer")[0].clientHeight)}l.onMoveIndex(l.carouselIndex,0);l.moveCSS3(l.mostVisited,{x:0,y:0});l.moveCSS3(l.page1,{x:0,y:0});l.pagePos.y2=l.pagePos.y1=l.pagePos.y0=0}}catch(p){console.log("error adding carousel "+p)}};g.prototype={startX:0,startY:0,dx:0,dy:0,myDivWidth:0,myDivHeight:0,cssMoveStart:0,childrenCount:0,carouselIndex:0,vertical:false,horizontal:true,movedDistance:0,el:null,container:null,pagingDiv:null,pagingCssName:"carousel_paging",pagingCssNameSelected:"carousel_paging_selected",direction:"",page0Length:5,drag:40,pagePos:{y0:0,y1:0,y2:0},maxY:{y0:0,y1:0,y2:0},touchStart:function(i){this.hasMoved=false;this.direction="";var h="y"+this.carouselIndex;if(!this.maxY[h]){if(!window.orientation){if(this.carouselIndex==2){this.maxY[h]=(-(document.getElementsByClassName("mvItem").length-6)*(parseInt(getComputedStyle(this.mostVisited).height)/6))}else{if(this.carouselIndex==1){this.maxY[h]=(-Math.ceil(document.getElementsByClassName("iconContainer").length/4)*(97)+parseInt(getComputedStyle(this.page1).height))}}}else{if(this.carouselIndex==2){this.maxY[h]=(-(document.getElementsByClassName("mvItem").length-2.5)*(53))}else{if(this.carouselIndex==1){this.maxY[h]=(-Math.ceil(document.getElementsByClassName("iconContainer").length/6)*(97)+document.getElementsByClassName("urlContainer")[0].clientHeight)}}}}if(h==="y0"){this.maxY["y0"]=document.getElementById("siteNavContainer").clientHeight-document.getElementById("siteNav").clientHeight;if(typeof window.memHeight=="number"){this.pagePos["y0"]=-window.memHeight;window.memHeight=undefined}}if(this.maxY[h]>0){this.maxY[h]=0}this.startY=i.touches[0].pageY;this.startX=i.touches[0].pageX},touchMove:function(j){this.hasMoved=true;var k={x:j.touches[0].pageX-this.startX,y:j.touches[0].pageY-this.startY};this.movedDistance=k.x;if(!this.direction){this.direction=(Math.abs(k.x)>Math.abs(k.y))?"horizontal":"vertical"}if(this.direction=="horizontal"){var i={x:0,y:0};this.dx=k.x;this.dx+=this.cssMoveStart;i.x=this.dx;this.moveCSS3(this.el,i)}else{var h="y"+this.carouselIndex;var i={x:0,y:0};i.y=k.y+this.pagePos[h];if(i.y>this.drag){i.y=this.drag}else{if(this.maxY[h]<=0&&i.y<(this.maxY[h]-this.drag)){i.y=this.maxY[h]-this.drag}}if(this.carouselIndex==1){this.moveCSS3(this.page1,i)}else{if(this.carouselIndex==2){this.moveCSS3(this.mostVisited,i)}else{this.moveCSS3(this.siteNav,i)}}this.dy=i.y}j.preventDefault()},touchEnd:function(o){if(!this.hasMoved){return}try{var j=b(new WebKitCSSMatrix(window.getComputedStyle(this.el,null).webkitTransform).e);if(j>0){this.moveCSS3(this.el,{x:0,y:0},"300","detect")}else{var h=this.movedDistance/this.myDivWidth;var k=this.carouselIndex;var l={x:0,y:0};if(this.direction=="horizontal"){if(Math.abs(h)>0.03){if(h>0&&k>0){k-=1}else{if(h<0&&k<this.childrenCount-1){k+=1}}}l.x=(k*this.myDivWidth*-1);this.moveCSS3(this.el,l,150,"detect");this.cssMoveStart=l.x}else{var i="y"+this.carouselIndex;l.y=this.dy;var m=200;if(l.y>0){l.y=0}else{if(l.y<this.maxY[i]){l.y=this.maxY[i]}}this.pagePos[i]=l.y;if(this.carouselIndex==1){this.moveCSS3(this.page1,l,m)}else{if(this.carouselIndex==2){this.moveCSS3(this.mostVisited,l,m)}else{this.moveCSS3(this.siteNav,l,m)}}}if(this.pagingDiv&&this.carouselIndex!==k){document.getElementById(this.container.id+"_"+this.carouselIndex).className=this.pagingCssName;document.getElementById(this.container.id+"_"+k).className=this.pagingCssNameSelected}this.carouselIndex=k;localStorage.index=k}}catch(o){console.log(o)}this.dx=0;this.startX=0;this.dy=0;this.startY=0},onMoveIndex:function(i,h){this.myDivWidth=b(this.container.clientWidth/2);this.myDivHeight=b(this.container.clientHeight);try{document.getElementById(this.container.id+"_"+this.carouselIndex).className=this.pagingCssName;var k=Math.abs(i-this.carouselIndex);var l=i;if(l<0){l=0}if(l>this.childrenCount-1){l=this.childrenCount-1}var j={x:0,y:0};if(this.vertical){j.y=(l*this.myDivHeight*-1)}else{j.x=(l*this.myDivWidth*-1)}var o=h?h:50+parseInt((k*20));this.moveCSS3(this.el,j,o,"detect");this.cssMoveStart=j.x;this.carouselIndex=l;if(this.pagingDiv){document.getElementById(this.container.id+"_"+this.carouselIndex).className=this.pagingCssNameSelected}}catch(m){console.log("Error "+m)}},moveCSS3:function(h,k,j){j=j||0;h.style.webkitTransform="translate"+f+k.x+"px,"+k.y+"px"+e;if(j){h.style.webkitTransitionDuration=j+"ms";h.style.webkitBackfaceVisiblity="hidden";h.style.webkitTransformStyle="preserve-3d";h.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)"}else{h.style.webkitTransitionDuration="";h.style.webkitBackfaceVisiblity="";h.style.webkitTransformStyle="";h.style.webkitTransitionTimingFunction=""}if(arguments[3]&&this.hasMoved){var i=this;window.transitionListener=setTimeout(function(){h.style.webkitTransform="";setTimeout(function(){console.log("Animation error detected, fixing!");h.style.webkitTransform="translate"+f+k.x+"px,"+k.y+"px"+e},0)},500)}},addItem:function(h){if(h&&h.nodeType){this.container.childNodes[0].appendChild(h);this.refreshItems()}},refreshItems:function(){var l=0;var o=this;var m=this.el;n=m.childNodes[0];var q;var p="100%";var h=[];for(;n;n=n.nextSibling){if(n.nodeType===1){h.push(n);l++}}this.childrenCount=l;q="50%";for(var k=0;k<h.length;k++){if(this.horizontal){h[k].style.width=q;h[k].style.height="100%"}else{h[k].style.height="100%";h[k].style.width="100%";h[k].style.display="block"}}m.style.width="100%";m.style.height="100%";m.style["min-height"]="100%";m.style.webkitTransform="translate"+f+((+localStorage.index)*this.container.clientWidth/2*-1)+"px,"+0+"px"+e;if(this.pagingDiv){for(k=0;k<this.childrenCount;k++){var j=document.getElementById("carousel_"+k);j.pageId=k;if(k!==(+localStorage.index)){j.className=this.pagingCssName}else{j.className=this.pagingCssNameSelected}j.onclick=function(){o.onMoveIndex(this.pageId)};this.pagingDiv.appendChild(j);j=null}}setTimeout(function(){localStorage.index?o.onMoveIndex((+localStorage.index),0):o.onMoveIndex(1,0);if(localStorage.index==0){if(localStorage.virticalIndex){var r=localStorage.virticalIndex;var i=document.getElementById("navTit"+r);displayItems(r,i,true)}}o.moveCSS3(o.mostVisited,{x:0,y:0});eventCreate(document.getElementById("page1"))},100)}};return g})();function b(e){if(isNaN(parseFloat(e))){e=e.replace(/[^0-9.-]/,"")}return parseFloat(e)}})(document.getElementById("carousel"));function init_carousel(){var a=document.getElementById("carousel").carousel("carousel",{pagingDiv:"carousel_dots",pagingCssName:"carousel_paging",pagingCssNameSelected:"carousel_paging_selected",preventDefaults:false})}window.addEventListener("load",init_carousel,false);window.addEventListener("webkitTransitionEnd",function(){clearTimeout(window.transitionListener);console.log("Transition end!")},false);